<!-- Executive Summary 컴포넌트 -->
<section class="executive-summary">
    <h2>📋 경영진 요약</h2>
    
    <!-- 심각도별 알림 박스 -->
    {% if severity == 'critical' %}
    <div class="alert alert-critical">
        <div class="alert-icon">🚨</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('치명적 보안 문제 발견') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% elif severity == 'warning' %}
    <div class="alert alert-warning">
        <div class="alert-icon">⚠️</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('보안 문제 발견') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% elif severity == 'success' %}
    <div class="alert alert-success">
        <div class="alert-icon">✅</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('보안 상태 양호') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% else %}
    <div class="alert alert-info">
        <div class="alert-icon">ℹ️</div>
        <div class="alert-content">
            <h3>{{ alert_title | default('보안 분석 완료') }}</h3>
            <p>{{ alert_message }}</p>
        </div>
    </div>
    {% endif %}

    <!-- 비즈니스 영향 메트릭 -->
    <div class="impact-metrics">
        <h4>비즈니스 영향 지표</h4>
        <div class="metrics-grid">
            <div class="metric-card {{ 'critical' if user_loss_rate > 50 else 'warning' if user_loss_rate > 20 else 'normal' }}">
                <div class="metric-number">{{ "%.0f"|format(user_loss_rate) }}%</div>
                <div class="metric-label">예상 사용자 이탈률</div>
                <div class="metric-detail">{{ "%.0f"|format(lost_users_daily) }}명/일 손실</div>
            </div>
            
            <div class="metric-card {{ 'critical' if annual_loss > 100000000 else 'warning' if annual_loss > 50000000 else 'normal' }}">
                <div class="metric-number">{{ format_currency(annual_loss) }}</div>
                <div class="metric-label">연간 예상 손실</div>
                <div class="metric-detail">{{ format_currency(monthly_loss) }}/월</div>
            </div>
            
            <div class="metric-card {{ 'critical' if seo_impact > 30 else 'warning' if seo_impact > 15 else 'normal' }}">
                <div class="metric-number">-{{ "%.0f"|format(seo_impact) }}%</div>
                <div class="metric-label">검색 순위 하락 예상</div>
                <div class="metric-detail">유기적 트래픽 감소</div>
            </div>
            
            <div class="metric-card {{ 'critical' if trust_damage > 70 else 'warning' if trust_damage > 40 else 'normal' }}">
                <div class="metric-number">{{ "%.0f"|format(trust_damage) }}%</div>
                <div class="metric-label">브랜드 신뢰도 손상</div>
                <div class="metric-detail">고객 신뢰 회복 필요</div>
            </div>
        </div>
    </div>

    <!-- 즉시 조치사항 -->
    <div class="urgent-actions">
        <h4>🎯 즉시 조치사항</h4>
        <div class="actions-timeline">
            {% for action in urgent_actions %}
            <div class="action-item priority-{{ action.priority }}">
                <div class="action-timeline">
                    <div class="action-time">{{ action.timeframe }}</div>
                    <div class="action-priority-badge">{{ action.priority }}</div>
                </div>
                <div class="action-content">
                    <h5>{{ action.title }}</h5>
                    <p>{{ action.description }}</p>
                    {% if action.expected_impact %}
                    <div class="expected-impact">
                        <strong>예상 효과:</strong> {{ action.expected_impact }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- 한눈에 보는 요약 -->
    <div class="summary-at-glance">
        <h4>📊 한눈에 보는 요약</h4>
        <div class="summary-grid">
            <div class="summary-item">
                <strong>현재 보안 등급</strong>
                <span class="security-grade grade-{{ grade_class }}">{{ security_grade }}</span>
            </div>
            <div class="summary-item">
                <strong>주요 문제점</strong>
                <span class="issue-count">{{ issues_count }}개 발견</span>
            </div>
            <div class="summary-item">
                <strong>해결 예상 시간</strong>
                <span class="solution-time">{{ estimated_fix_time }}</span>
            </div>
            <div class="summary-item">
                <strong>예상 투자 비용</strong>
                <span class="investment-cost">{{ format_currency(estimated_cost) }}</span>
            </div>
        </div>
    </div>
</section>

<style>
/* Executive Summary 스타일 */
.executive-summary {
    background-color: #f8f9fa;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 30px;
    page-break-inside: avoid;
}

/* 알림 박스 스타일 */
.alert {
    display: flex;
    align-items: flex-start;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 25px;
    page-break-inside: avoid;
}

.alert-icon {
    font-size: 24px;
    margin-right: 15px;
    flex-shrink: 0;
}

.alert-content h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    font-weight: bold;
}

.alert-content p {
    margin: 0;
    line-height: 1.5;
}

.alert-critical {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
}

.alert-warning {
    background-color: #fff3cd;
    border: 1px solid #ffeaa7;
    color: #856404;
}

.alert-success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
}

.alert-info {
    background-color: #d1ecf1;
    border: 1px solid #bee5eb;
    color: #0c5460;
}

/* 메트릭 그리드 */
.impact-metrics {
    margin-bottom: 25px;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.metric-card {
    background: white;
    padding: 20px;
    border-radius: 6px;
    text-align: center;
    border: 2px solid #e9ecef;
    transition: all 0.3s ease;
}

.metric-card.critical {
    border-color: #dc3545;
    background-color: #fff5f5;
}

.metric-card.warning {
    border-color: #ffc107;
    background-color: #fffdf5;
}

.metric-card.normal {
    border-color: #28a745;
    background-color: #f5fff5;
}

.metric-number {
    font-size: 20px;
    font-weight: bold;
    color: #dc3545;
    margin-bottom: 5px;
}

.metric-card.normal .metric-number {
    color: #28a745;
}

.metric-card.warning .metric-number {
    color: #fd7e14;
}

.metric-label {
    font-size: 12px;
    font-weight: bold;
    color: #495057;
    margin-bottom: 5px;
}

.metric-detail {
    font-size: 10px;
    color: #6c757d;
}

/* 조치사항 타임라인 */
.urgent-actions {
    margin-bottom: 25px;
}

.actions-timeline {
    margin-top: 15px;
}

.action-item {
    display: flex;
    margin-bottom: 15px;
    padding: 15px;
    background: white;
    border-radius: 6px;
    border-left: 4px solid #6c757d;
}

.action-item.priority-critical {
    border-left-color: #dc3545;
}

.action-item.priority-high {
    border-left-color: #fd7e14;
}

.action-item.priority-medium {
    border-left-color: #ffc107;
}

.action-timeline {
    width: 120px;
    flex-shrink: 0;
    margin-right: 15px;
}

.action-time {
    font-size: 11px;
    font-weight: bold;
    color: #495057;
    margin-bottom: 5px;
}

.action-priority-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    color: white;
    background-color: #6c757d;
}

.priority-critical .action-priority-badge {
    background-color: #dc3545;
}

.priority-high .action-priority-badge {
    background-color: #fd7e14;
}

.priority-medium .action-priority-badge {
    background-color: #ffc107;
    color: #000;
}

.action-content h5 {
    margin: 0 0 5px 0;
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.action-content p {
    margin: 0 0 8px 0;
    font-size: 12px;
    line-height: 1.4;
}

.expected-impact {
    font-size: 11px;
    color: #28a745;
    font-style: italic;
}

/* 요약 그리드 */
.summary-at-glance {
    background: white;
    padding: 20px;
    border-radius: 6px;
    border: 1px solid #e9ecef;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.summary-item {
    text-align: center;
    padding: 10px;
    border-bottom: 1px solid #e9ecef;
}

.summary-item strong {
    display: block;
    font-size: 11px;
    color: #6c757d;
    margin-bottom: 5px;
    text-transform: uppercase;
}

.summary-item span {
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.issue-count {
    color: #dc3545;
}

.solution-time {
    color: #17a2b8;
}

.investment-cost {
    color: #28a745;
}

/* 반응형 */
@media print {
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .summary-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>